<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Zaxro blog! | Zaxro Blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://suyuying.github.io/img/githubLogoV1.svg"><meta data-rh="true" name="twitter:image" content="https://suyuying.github.io/img/githubLogoV1.svg"><meta data-rh="true" property="og:url" content="https://suyuying.github.io/blog"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="Zaxro blog! | Zaxro Blog"><meta data-rh="true" name="description" content="A blog for recording note of coding and daily life!"><meta data-rh="true" property="og:description" content="A blog for recording note of coding and daily life!"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/img/githubLogoV1.svg"><link data-rh="true" rel="canonical" href="https://suyuying.github.io/blog"><link data-rh="true" rel="alternate" href="https://suyuying.github.io/blog" hreflang="en"><link data-rh="true" rel="alternate" href="https://suyuying.github.io/blog" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://H9WLDZ1QEH-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Zaxro Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Zaxro Blog Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Zaxro Blog" href="/opensearch.xml">


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC&amp;display=swap"><link rel="stylesheet" href="/assets/css/styles.8bf08c2b.css">
<link rel="preload" href="/assets/js/runtime~main.64e6a4e9.js" as="script">
<link rel="preload" href="/assets/js/main.9076707d.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/githubLogoV1.svg" alt="Zaxro" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/githubLogoV1.svg" alt="Zaxro" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Zaxro</b></a><a class="navbar__item navbar__link" href="/docs/intro">Code Note</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Daily Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/suyuying" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/04/11/Aws/aws-vpc-setting">aws vpc setting introduction</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/04/11/linux-server/linux-disk-management">linux disk management command used commonly</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/04/07/gitlab-action/difference-between-read-repository-and-read-registry">difference between read_repository and read_registry in gitlab</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/04/06/gitlab-action/gitlab-basic-intro-dind-build-image">CI:gitlab basic intro about  CI/CD, build image and push to git-lab container</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/03/30/Others/modemVSigw">Do Internet gateways and modem need to be used together?</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="https://github.com/suyuying.png"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2023/04/11/Aws/aws-vpc-setting">aws vpc setting introduction</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-04-11T00:00:00.000Z" itemprop="datePublished">April 11, 2023</time> · <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/suyuying" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/suyuying.png" alt="zaxro"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/suyuying" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">zaxro</span></a></div><small class="avatar__subtitle" itemprop="description">Life is too short to live someone else&#x27;s dream</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="vpc-基本介紹">VPC 基本介紹<a href="#vpc-基本介紹" class="hash-link" aria-label="Direct link to VPC 基本介紹" title="Direct link to VPC 基本介紹">​</a></h2><p>一般地端要讓網路進到 server,結構簡單的長這樣</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">internet -&gt; Router -&gt; Switch -&gt; server or database</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>要建立同樣的網路運行環境在 aws 要透過 Amazon Virtual Private Cloud(VPC)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="配置-vpc">配置 VPC<a href="#配置-vpc" class="hash-link" aria-label="Direct link to 配置 VPC" title="Direct link to 配置 VPC">​</a></h3><p>有 subnet、Internet gateway、NAT gateway</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/aws">AWS</a></li></ul></div></footer></article><div id="disqus_thread"></div><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="https://github.com/suyuying.png"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2023/04/11/linux-server/linux-disk-management">linux disk management command used commonly</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-04-11T00:00:00.000Z" itemprop="datePublished">April 11, 2023</time> · <!-- -->6 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/suyuying" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/suyuying.png" alt="zaxro"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/suyuying" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">zaxro</span></a></div><small class="avatar__subtitle" itemprop="description">Life is too short to live someone else&#x27;s dream</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="disk-management-command">disk management command<a href="#disk-management-command" class="hash-link" aria-label="Direct link to disk management command" title="Direct link to disk management command">​</a></h2><p>在管理上會去檢視硬碟使用量,資料夾資料大小,如果掛硬碟跟卸下硬碟也會有專用 command</p><p><code>df -h</code>: 列出所有已掛載的硬盤的分區信息以及剩餘空間大小,結果長這樣</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem      Size  Used Avail Use% Mounted on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">devtmpfs        7.6G     0  7.6G   0% /dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs           7.7G     0  7.7G   0% /dev/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs           7.7G  801M  6.9G  11% /run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs           7.7G     0  7.7G   0% /sys/fs/cgroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/nvme0n1p1  100G  6.0G   95G   6% /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/nvme1n1    300G  7.1G  293G   3% /var/gogo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs           1.6G     0  1.6G   0% /run/user/1000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/linux">linux</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/disk-command">disk command</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/aws">aws</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about linux disk management command used commonly" href="/blog/2023/04/11/linux-server/linux-disk-management"><b>Read More</b></a></div></footer></article><div id="disqus_thread"></div><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="https://github.com/suyuying.png"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2023/04/07/gitlab-action/difference-between-read-repository-and-read-registry">difference between read_repository and read_registry in gitlab</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-04-07T00:00:00.000Z" itemprop="datePublished">April 7, 2023</time> · <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/suyuying" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/suyuying.png" alt="zaxro"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/suyuying" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">zaxro</span></a></div><small class="avatar__subtitle" itemprop="description">Life is too short to live someone else&#x27;s dream</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="gitlab-權限管理">gitlab 權限管理<a href="#gitlab-權限管理" class="hash-link" aria-label="Direct link to gitlab 權限管理" title="Direct link to gitlab 權限管理">​</a></h2><p>gitlab 有一堆權限管理東東,<a href="https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html#personal-access-token-scopes" target="_blank" rel="noopener noreferrer">詳情</a>,透過適當的設計來安全權限給予.</p><p>這邊說一下之前遇到的問題,read_repository and read_registry 差別在哪裡!官方解釋對個別解釋如下:</p><p><code>read_registry</code>-Grants read-only (pull) access to a Container Registry images if a project is private and authorization is required. Available only when the Container Registry is enabled.</p><p><code>read_repository</code>-Grants read-only access to repositories on private projects using Git-over-HTTP or the Repository Files API.</p><p>小結:read_registry 主要是讓你只能抓 image 下來,read_repository 則是可以檢查 repo 裡面所有分支,commit 等,並可以 clone repository,但不能 push!</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/gitlab-action">gitlab action</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/cicd">CICD</a></li></ul></div></footer></article><div id="disqus_thread"></div><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="https://github.com/suyuying.png"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2023/04/06/gitlab-action/gitlab-basic-intro-dind-build-image">CI:gitlab basic intro about  CI/CD, build image and push to git-lab container</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-04-06T00:00:00.000Z" itemprop="datePublished">April 6, 2023</time> · <!-- -->10 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/suyuying" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/suyuying.png" alt="zaxro"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/suyuying" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">zaxro</span></a></div><small class="avatar__subtitle" itemprop="description">Life is too short to live someone else&#x27;s dream</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="basic-tutorial">basic tutorial<a href="#basic-tutorial" class="hash-link" aria-label="Direct link to basic tutorial" title="Direct link to basic tutorial">​</a></h2><p><a href="https://docs.gitlab.com/ee/ci/#concepts" target="_blank" rel="noopener noreferrer">以下出自官網</a>. 主要介紹幾個大方向.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="concepts">Concepts<a href="#concepts" class="hash-link" aria-label="Direct link to Concepts" title="Direct link to Concepts">​</a></h3><ul><li>Pipelines: CI/CD 透過 pipeline 建立。</li><li>CI/CD variables: 有 GitLab <a href="https://docs.gitlab.com/ee/ci/variables/predefined_variables.html" target="_blank" rel="noopener noreferrer">預設變數</a>（可以在 script 用 export 取得）、自定義環境變數和<a href="https://docs.gitlab.com/ee/ci/secure_files/" target="_blank" rel="noopener noreferrer">secure files</a>。</li><li>Environments: 要把應用部署在不同環境要使用。</li><li>Job artifacts: 程式過程中執行的產物（例如 xxx.csv）檔案的輸出以及其他 job 使用等。</li><li>Cache dependencies: 使用 cache 關鍵字可以幫助減少 pipeline 的運行時間，提高 CI/CD 效率。通過緩存依賴項，可以避免在每次運行 pipeline 時都從頭開始安裝相同的依賴項。</li><li>GitLab Runner: 設定執行這個 pipeline 的計算機。</li><li>Pipeline efficiency: 在 pipeline 過程中也會遇到一些煩人的問題，例如運行了一分鐘才失敗，需要多次查看等。如何提高效率呢？可以使用緩存、縮減要拉的映像檔大小、使用規則以及 <code>only</code>/<code>except</code> 關鍵字來控制作業在何時和何處運行。</li><li>Test cases: 在測試平台上建立測試情境。</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/gitlab-action">gitlab action</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/cicd">CICD</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about CI:gitlab basic intro about  CI/CD, build image and push to git-lab container" href="/blog/2023/04/06/gitlab-action/gitlab-basic-intro-dind-build-image"><b>Read More</b></a></div></footer></article><div id="disqus_thread"></div><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="https://github.com/suyuying.png"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2023/03/30/Others/modemVSigw">Do Internet gateways and modem need to be used together?</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-03-30T00:00:00.000Z" itemprop="datePublished">March 30, 2023</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/suyuying" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/suyuying.png" alt="zaxro"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/suyuying" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">zaxro</span></a></div><small class="avatar__subtitle" itemprop="description">Life is too short to live someone else&#x27;s dream</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="device-basic-introduction">Device basic introduction<a href="#device-basic-introduction" class="hash-link" aria-label="Direct link to Device basic introduction" title="Direct link to Device basic introduction">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="internet-gateway">internet gateway<a href="#internet-gateway" class="hash-link" aria-label="Direct link to internet gateway" title="Direct link to internet gateway">​</a></h3><p>互聯網閘道器（Internet Gateway）是一種網路設備，用於連接位於本地網路（例如公司或家庭網路）內的設備與互聯網間的通訊，扮演網路中介，將本地網路封包轉到外網，再把外網封包轉回本地網路，所以需要有 router 功能</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="modem">Modem<a href="#modem" class="hash-link" aria-label="Direct link to Modem" title="Direct link to Modem">​</a></h3><p>數據機(Moden)，主要功用是將數字訊號轉換成模擬訊號。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="數字訊號">數字訊號<a href="#數字訊號" class="hash-link" aria-label="Direct link to 數字訊號" title="Direct link to 數字訊號">​</a></h4><p>數字信號是一種離散的信號，它由一系列離散的數字或二進制碼表示。這些二進制碼只能取 0 或 1 的值。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="模擬訊號">模擬訊號<a href="#模擬訊號" class="hash-link" aria-label="Direct link to 模擬訊號" title="Direct link to 模擬訊號">​</a></h4><p>模擬信號是一種連續的信號，它是由一個連續的波形表示的。模擬信號可以取無限個值，因為它們是基於物理量（如電壓、電流、聲音波形等）的連續變化。模擬信號常用於聲音和視頻等模擬設備中，如收音機、電視和手機等</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="do-internet-gateway-and-modem-need-to-be-used-together">Do Internet gateway and modem need to be used together?<a href="#do-internet-gateway-and-modem-need-to-be-used-together" class="hash-link" aria-label="Direct link to Do Internet gateway and modem need to be used together?" title="Direct link to Do Internet gateway and modem need to be used together?">​</a></h2><p>不一定，這依據情形而定。以下情形會需要一起用：</p><ol><li>撥號網路: 需要將計算機的數字訊號轉成模擬訊號，並透過電話線傳遞訊號到互聯網。</li><li>電視網路: 同上，一些有線電視網路提供的網路服務一樣要先做訊號轉換，再透過有線電視網路傳輸。</li></ol><p>簡言之，如果你家使用撥接或有線電視提供的網路，就會需要數據機</p><p>如果你家用光纖、DSL、電纜等，就可以不用轉換訊號，直接透過 Igw 將數字訊號 routing 到外部網路。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/curl">curl</a></li></ul></div></footer></article><div id="disqus_thread"></div><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="https://github.com/suyuying.png"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2023/3/29/Aws/aws-book-study-note">aws book study note</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-03-29T00:00:00.000Z" itemprop="datePublished">March 29, 2023</time> · <!-- -->12 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/suyuying" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/suyuying.png" alt="zaxro"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/suyuying" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">zaxro</span></a></div><small class="avatar__subtitle" itemprop="description">Life is too short to live someone else&#x27;s dream</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="名詞解釋">名詞解釋<a href="#名詞解釋" class="hash-link" aria-label="Direct link to 名詞解釋" title="Direct link to 名詞解釋">​</a></h2><p>IAAS: 雲端業者提供硬體設施、網路。不包含作業系統(Linux or Windows),中介軟體(MySql,Pika)，以及應用程式。</p><p>PAAS: 雲端業者提供硬體設施、網路、作業系統、中介軟體，因次伺服器故障跟備份資料庫等工作可以由雲端業者負責。</p><p>SAAS: 雲端業者提供硬體設施、網路、作業系統、中介軟體、應用程式。Gmail 就屬這類型.</p><p>Region: aws 基礎設施的一個單位，每個區域都是獨立數據中心群集，由多個 Availability Zone 組成，所以像新加坡區，aws 目前就 3 個可用區域。</p><p>Availability Zone: 具有獨立的電源、網絡和冷卻系統，以及與其他可用區域之間高帶寬、低延遲的網絡連接。每個可用區域都是一個獨立的數據中心群集，具有高度的冗餘性和可靠性，並且可以通過低延遲的連接實現可用區域之間的容錯和負載平衡。</p><p>VPC(Virtual Private Cloud): VPC 只能限在單個 region 內，但可以跨同一格 region 內的多個 Availability Zone</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/aws">AWS</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about aws book study note" href="/blog/2023/3/29/Aws/aws-book-study-note"><b>Read More</b></a></div></footer></article><div id="disqus_thread"></div><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="https://github.com/suyuying.png"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2023/03/29/Zabbix/zabbix-monitor-log">Zabbix Sender monitor key word in log, and show data in grafana</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-03-29T00:00:00.000Z" itemprop="datePublished">March 29, 2023</time> · <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/suyuying" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/suyuying.png" alt="zaxro"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/suyuying" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">zaxro</span></a></div><small class="avatar__subtitle" itemprop="description">Life is too short to live someone else&#x27;s dream</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="前提">前提<a href="#前提" class="hash-link" aria-label="Direct link to 前提" title="Direct link to 前提">​</a></h2><p>這邊假設已經設定好 host，且 zabbix 有接上 grafana 情況後，繼續往下描述.</p><p>目的: 定時抓取某 log file 其中的特定關鍵字，用 zabbix-sender 傳送資訊給 zabbix server，並把資料設定報警到 telegram，資訊會用 grafana 的 log 顯示。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step1-設定-item">step1. 設定 item<a href="#step1-設定-item" class="hash-link" aria-label="Direct link to step1. 設定 item" title="Direct link to step1. 設定 item">​</a></h3><p>正常 zabbix 設定機器流程：</p><p>建立 Hosts groups-&gt; 建立 Templates-&gt;往 Template 內設定要監控的 item-&gt;再把 templates 連結到 Hosts Groups 上面-&gt;最後把主機也就是 Host 添加到指定的 Host groups 上面。</p><p>這邊因為特別需求關係(只有這一台機器需要），因此直接在該 Host 上面設定 item.</p><p>選 Hosts</p><div style="display:flex;justify-content:center"><img loading="lazy" src="/assets/images/zabbix-side-bar-9ca4a1f3116d447b5a09cc577b209704.png" style="max-height:300px" alt="zabbix-side-bar" class="img_CujE"></div><p>因為是用 zabbix-sender 所以這邊 type 用 zabbix trapper，要注意機器上面都用 Key 跟 zabbix server 溝通，Name 是該 Item 的名字，兩個設定常常會搞混。</p><div style="display:flex;justify-content:center"><img loading="lazy" src="/assets/images/zabbix-traper-56b38395d4722bd7c7303d094a64a3e4.png" style="max-height:300px" alt="zabbix-side-bar" class="img_CujE"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step2-安裝-zabbix-sender-並傳資料">step2. 安裝 zabbix-sender 並傳資料<a href="#step2-安裝-zabbix-sender-並傳資料" class="hash-link" aria-label="Direct link to step2. 安裝 zabbix-sender 並傳資料" title="Direct link to step2. 安裝 zabbix-sender 並傳資料">​</a></h3><p>機器上腳本設定 zabbix_sender 傳送資料，用 key 跟 output 做傳送</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 安裝zabbix-sender</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yum install zabbix-sender</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 傳資訊給zabbix server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">zabbix_sender -z 10.121.0.9  -s yourHostName -k test -o &quot;$(cat /tmp/Lost_connection_to_db_server_${range2}_${range1}.log)&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>確認 zabbix 是否有收到資料</p><div style="display:flex;justify-content:center"><img loading="lazy" src="/assets/images/zabbix-get-last-data-4f5035c4cd89c0a5bd7642c9c12dd638.png" style="max-height:300px" alt="zabbix-side-bar" class="img_CujE"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step3-設定-grafana-抓取資料">step3. 設定 grafana 抓取資料<a href="#step3-設定-grafana-抓取資料" class="hash-link" aria-label="Direct link to step3. 設定 grafana 抓取資料" title="Direct link to step3. 設定 grafana 抓取資料">​</a></h3><p>確認有收到資料後，在 grafana 新建 panel</p><div style="display:flex;justify-content:center"><img loading="lazy" src="/assets/images/grafana-add-new-panel-bb60eccf47e80c7f2c2cbb02942536af.png" style="max-height:300px" alt="zabbix-side-bar" class="img_CujE"></div><p>設定資料原，注意這邊的 Query Mode 是設定 Text，有很多種型態，選錯會找不到資料</p><div style="display:flex;justify-content:center"><img loading="lazy" src="/assets/images/grafana-set-data-source-861012de7e8c4fbf707311228a71155d.png" style="max-height:300px" alt="zabbix-side-bar" class="img_CujE"></div><p>Grafana 模式記得要選 log，也可以使用其他模式玩玩看，因為這邊沒啥雷，就不特別截圖說明</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="optionalstep4-zabbix-告警-tg">(optional)step4. zabbix 告警 tg<a href="#optionalstep4-zabbix-告警-tg" class="hash-link" aria-label="Direct link to (optional)step4. zabbix 告警 tg" title="Direct link to (optional)step4. zabbix 告警 tg">​</a></h3><p>先設定 Trigger，Problem expression 也就是當傳送資訊符合設定的條件就會引發告警，Recovery experssion 也就是當資訊符合哪些條件就會解除告警。</p><div style="display:flex;justify-content:center"><img loading="lazy" src="/assets/images/zabbix-sender-b-log-12674fa7728409ba93f08ce3b314e90f.png" alt="zabbix-side-bar" class="img_CujE"></div><p>確定完的確會告警跟回復後，就可以設定 TG 告警。先去 Administration-&gt;Media type 複製 Telegram 那格。</p><div style="display:flex;justify-content:center"><img loading="lazy" src="/assets/images/zabbix-clone-telegrana-2ff897d7d94a2c5fea128dda989a63dd.png" alt="zabbix-side-bar" class="img_CujE"></div><p>在 Token 位置加入你 TG Token</p><div style="display:flex;justify-content:center"><img loading="lazy" src="/assets/images/zabbix-add-token-5636eb87fb7a7f27bdfe474efe54f31e.png" alt="zabbix-side-bar" class="img_CujE"></div><p>建立新 User Group</p><div style="display:flex;justify-content:center"><img loading="lazy" src="/assets/images/zabbix-add-zabbix-group-27771fa730ca2f4fdd2f0095b5303ff0.png" style="max-height:300px" alt="zabbix-side-bar" class="img_CujE"></div><p>設定該 User Group 對哪些 Host Group 有監控權限。</p><div style="display:flex;justify-content:center"><img loading="lazy" src="/assets/images/zabbix-group-permission-fd95dfc4b5d7cc63e18161e07d5aa0da.png" style="max-height:300px" alt="zabbix-side-bar" class="img_CujE"></div><p>建立 User，並把該 User 加到 Group 內部，並設定當哪些狀態發生就往 TG 送資料</p><div style="display:flex;justify-content:center"><img loading="lazy" src="/assets/images/zabbix-user-media-7b08a9012605c23fa5347612a4d86c60.png" style="max-height:300px" alt="zabbix-side-bar" class="img_CujE"></div><p>以上都 OK，可以會到前面 media type 那邊測試是否可以傳資料到ＴＧ</p><p>如果要將 Trigger 的資料送到 TG，一定要設定 Actions，這邊是一個坑，前面設定完了但都沒有送到 TG，結果發現這格沒有設定ＺＺＺ</p><div style="display:flex;justify-content:center"><img loading="lazy" src="/assets/images/zabbix-trigger-actions-to-tg-25d1c6bc96907c6f46a5c985f47f6ce3.png" style="max-height:300px" alt="zabbix-side-bar" class="img_CujE"></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/zabbix">Zabbix</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/grafana">Grafana</a></li></ul></div></footer></article><div id="disqus_thread"></div><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="https://github.com/suyuying.png"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2023/03/25/Aws/aws-iam-setting">aws iam setting introduction</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-03-25T00:00:00.000Z" itemprop="datePublished">March 25, 2023</time> · <!-- -->9 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/suyuying" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/suyuying.png" alt="zaxro"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/suyuying" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">zaxro</span></a></div><small class="avatar__subtitle" itemprop="description">Life is too short to live someone else&#x27;s dream</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-aws-iam">what is aws IAM<a href="#what-is-aws-iam" class="hash-link" aria-label="Direct link to what is aws IAM" title="Direct link to what is aws IAM">​</a></h2><p><a href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/service_code_examples.html" target="_blank" rel="noopener noreferrer">什麼是 IAM</a> aws 官網的資訊一般都寫得滿棒的，本文出處主要是參考官網資訊做整理，因為管理上經驗只限於自己的環境用的 s3,CI 等等，所以打算趁這個機會檢視之前設定的 iAM 有沒有問題，當然，我相信這只是過程，隨著看過的資訊跟事情越多，會得到不同或者多個答案，總之，就先從這一步開始吧！</p><p>AWS Identity and Access Management (IAM) 用途：安全地控制對 Amazon Web Services (AWS) 和帳戶資源的存取。使用 IAM 為使用者和角色等身分提供您的帳戶中資源的存取權。</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/aws">AWS</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about aws iam setting introduction" href="/blog/2023/03/25/Aws/aws-iam-setting"><b>Read More</b></a></div></footer></article><div id="disqus_thread"></div><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="https://github.com/suyuying.png"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2023/03/20/SEO/google-register">How to let google find my website?</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-03-20T00:00:00.000Z" itemprop="datePublished">March 20, 2023</time> · <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/suyuying" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/suyuying.png" alt="zaxro"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/suyuying" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">zaxro</span></a></div><small class="avatar__subtitle" itemprop="description">Life is too short to live someone else&#x27;s dream</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="記錄一下整個-google-註冊自己網站過程">記錄一下整個 google 註冊自己網站過程<a href="#記錄一下整個-google-註冊自己網站過程" class="hash-link" aria-label="Direct link to 記錄一下整個 google 註冊自己網站過程" title="Direct link to 記錄一下整個 google 註冊自己網站過程">​</a></h2><ol><li>主要參考這篇 <a href="https://web-design.vip/google-web-submit.html" target="_blank" rel="noopener noreferrer">https://web-design.vip/google-web-submit.html</a> ， 他會提供你三個讓 google 爬蟲找到你最快得方式。</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="讓你的網站加入搜尋功能">讓你的網站加入搜尋功能<a href="#讓你的網站加入搜尋功能" class="hash-link" aria-label="Direct link to 讓你的網站加入搜尋功能" title="Direct link to 讓你的網站加入搜尋功能">​</a></h2><ol><li><a href="https://docusaurus.io/docs/next/search" target="_blank" rel="noopener noreferrer">Using Algolia DocSearch</a>申請 Algolia 審查</li><li></li></ol></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/google">google</a></li></ul></div></footer></article><div id="disqus_thread"></div><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="https://github.com/suyuying.png"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2023/03/16/Docker/docker-gitlab-error-connect-docker">docker gitlab runner error during connect Post &quot;http://docker:2375/v1.24/auth&quot; dial tcp lookup docker on 1.1.1.1:53 no such host</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-03-16T00:00:00.000Z" itemprop="datePublished">March 16, 2023</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/suyuying" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/suyuying.png" alt="zaxro"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/suyuying" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">zaxro</span></a></div><small class="avatar__subtitle" itemprop="description">Life is too short to live someone else&#x27;s dream</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="遇到問題的情境">遇到問題的情境<a href="#遇到問題的情境" class="hash-link" aria-label="Direct link to 遇到問題的情境" title="Direct link to 遇到問題的情境">​</a></h2><p>CICD 步驟裡面，每當開發人員把 code 寫完之後，會進行測試並把 code build 成 image 後推到 image registry
，之後到環境執行 deploy。</p><p>在 gitlab 裡面會用 gitlab runner，並在.gitlab-ci.yml 設計促發的情境下，執行.gitlab-ci.yml 內容，要在 gitlab runner 內 build image 通常會用到 docker:dind，它是具有 docker 引擎的 container！一般的 image 內通常都不會去安裝 docker 引擎，這段有點難懂，但你可以想想有 nginx,mysql 等等的 image，基本上只會有自己預設功能，不需要 docker 引擎，對於 docker 而言，裡面要可以用 docker 指令的， docker:dind 是一個選項。</p><p>在 build 版執行的 yml 如下。
主要功能就是登入在 gitlab 上面的公司的 image registry,之後在 gitlab runner 執行 build image 並推到 gitlab image registry.</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">.gitlab-ci.yml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">stages</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">variables</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token constant" style="color:#36acaa">IMAGE_NAME</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> hahaha</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token constant" style="color:#36acaa">CI_IMAGE</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token constant" style="color:#36acaa">CI_REGISTRY_IMAGE</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">$</span><span class="token constant" style="color:#36acaa">IMAGE_NAME</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">$</span><span class="token constant" style="color:#36acaa">CI_COMMIT_SHORT_SHA</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># </span><span class="token maybe-class-name">Build</span><span class="token plain"> moni</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">build</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">moni</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">stage</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">image</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> docker</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">dind</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">tags</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> docker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">before_script</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> docker login </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">u $</span><span class="token constant" style="color:#36acaa">CI_REGISTRY_USER</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">p $</span><span class="token constant" style="color:#36acaa">CI_REGISTRY_PASSWORD</span><span class="token plain"> $</span><span class="token constant" style="color:#36acaa">CI_REGISTRY</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">script</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> docker build </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">t $</span><span class="token constant" style="color:#36acaa">CI_IMAGE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> docker push $</span><span class="token constant" style="color:#36acaa">CI_IMAGE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> docker rmi $</span><span class="token constant" style="color:#36acaa">CI_IMAGE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">except</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> schedules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Dockerfile</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token constant" style="color:#36acaa">FROM</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">node</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">16</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">COPY</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">node </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">WORKDIR</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">RUN</span><span class="token plain"> npm install</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">npm install gulp </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">g</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">gulp build</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">EXPOSE</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">CMD</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;npm&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;run&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;start&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>執行過程到這一步<code>- docker login -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD $CI_REGISTRY</code>遇到報錯，
<code>error during connect: Post &quot;http://docker:2375/v1.24/auth&quot;: dial tcp: lookup docker on 1.1.1.1:53: no such host</code>。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="解法">解法:<a href="#解法" class="hash-link" aria-label="Direct link to 解法:" title="Direct link to 解法:">​</a></h3><p>在你掛到 gitlab runner 中 /etc/gitlab-runner 裡面的 config.toml，請先用 docker inspect 觀察 volume 掛載位置，如果你是用官網 local volume 掛載方法，那就是在 VM 上去 vim /srv/gitlab-runner/config/config.toml，去修改
<code>volumes = [&quot;/cache&quot;]</code> 變成
<code>volumes = [&quot;/var/run/docker.sock:/var/run/docker.sock&quot;,&quot;/cache&quot;]</code>。</p><p>並執行<code>docker restart gitlab-runner</code>!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="可能原因">可能原因：<a href="#可能原因" class="hash-link" aria-label="Direct link to 可能原因：" title="Direct link to 可能原因：">​</a></h3><p>執行這個修改，volumes 改為 <!-- -->[&quot;/var/run/docker.sock:/var/run/docker.sock&quot;, &quot;/cache&quot;]<!-- -->，讓 Runner Executor 使用主機外部的 Docker Engine。</p><p>所以推測，這可能是 gitlab runner 跟 gitlab server 上面驗證的機制，如果沒有這樣加，dind 就找不到 gitlab server 的驗證那關，所以就會失敗</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/docker">docker</a></li></ul></div></footer></article><div id="disqus_thread"></div><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/blog/page/2"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer class="font-sans container-fluid bg-gray-900 text-stone-200 pt-6 footer--dark"><div style="transform:translateX(-100%)" class="fixed bottom-0 left-0 h-1 w-full bg-indigo-600 backdrop-blur-3xl transition-transform duration-300 text-right text-white text-sm"></div><div class="container container-fluid"><div class="row footer__links mb-0"><div class="flex flex-wrap flex-col mb-2 w-1/3 items-baseline"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="flex flex-wrap flex-col mb-2 w-1/3 items-baseline"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="flex flex-wrap flex-col mb-2 w-1/3 items-baseline"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/suyuying" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.64e6a4e9.js"></script>
<script src="/assets/js/main.9076707d.js"></script>
</body>
</html>